<!--Author: Bryce, Ella, Alaina, Rex-->
<!--Description: Edit Events page-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Event</title>
    <style>
      /* Form container styling */
        form {
          width: 50%;
          margin: 20px auto;
          padding: 20px;
          border: 1px solid #ccc;
          border-radius: 10px;
          background-color: #F9F9F9;
          font-size: 12px;
        }
        label {
          display: block;
          margin-bottom: 8px;
          font-weight: bold;
        }
        input, textarea, button {
          width: 98%;
          padding: 8px;
          margin-bottom: 15px;
          border: 1px solid #ccc;
          border-radius: 5px;
        }
        select {
          width: 100%;
          padding: 8px;
          margin-bottom: 15px;
          border: 1px solid #ccc;
          border-radius: 5px;
        }

        input[type="checkbox"], input[type="radio"] {
          width: auto;
          margin-right: 5px;
        }
        button {
          background-color: #112d4e;
          color: white;
          font-size: 12px;
          cursor: pointer;
        }
        button:hover {
          background-color: #4571a0;
        }
      </style>
</head>
<body>
    <h1 style="text-align: center;">Edit Event</h1>
    <!--Event edit form-->
    <form action="/editEvent/<%= event.event_id %>" method="post">
    <label for="event_name">Event Name: </label>
    <input type="text" name="event_name" id="event_name" value="<%= event.event_name %>">
    <br><br>
    <label for="event_date">Event Date: </label>
    <input type="date" name="event_date" id="event_date" value="<%= event.event_date.toISOString().substring(0, 10) %>">
    <br><br>
    <!--Contact information section-->
    <label for="event_contact_organization">Contact Organization: </label>
    <input type = "text" name="event_contact_organization" id="event_contact" value="<%= contact.event_contact_organization %>">
    <br><br>
    <label for="event_contact_first_name">Contact First Name: </label>
    <input type = "text" name="event_contact_first_name" id="event_contact" value="<%= contact.event_contact_first_name %>">
    <br><br>
    <label for="event_contact_last_name">Contact Last Name: </label>
    <input type = "text" name="event_contact_last_name" id="event_contact" value="<%= contact.event_contact_last_name %>">
    <br><br>
    <label for="event_contact_phone">Contact Phone Number: </label>
    <input type = "tel" name="event_contact_phone" id="event_contact" value="<%= contact.event_contact_phone %>">
    <br><br>
    <label for="event_contact_email">Contact Email: </label>
    <input type = "email" name="event_contact_email" id="event_contact" value="<%= contact.event_contact_email %>">
    <br><br>
    <!--Event Location Details-->    
    <label for="event_address">Event Address: </label>
    <input type="text" name="event_address" id="event_address" value="<%= event.event_address %>">
    <br><br>
    <label for="event_city">Event City: </label>
    <input type="text" name="event_city" id="event_city" value="<%= event.event_city %>">
    <br><br>
    <label for="event_state">State*</label>
<select id="event_state" name="event_state" required>
    <option value="" <%= !event.event_state ? 'selected' : '' %>>Select State/Territory</option>
    <% 
    const states = ["AL", "AK", "AS", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FL", "GA", "GU", 
                   "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MD", "MA", "MI", "MN", 
                   "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "MP", "OH", 
                   "OK", "OR", "PA", "PR", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VI", "VA", 
                   "WA", "WV", "WI", "WY"];
    states.forEach(state => { %>
        <option value="<%= state %>" <%= event.event_state === state ? 'selected' : '' %>><%= state %></option>
    <% }); %>
</select> 
    <br><br>
    <label for="event_zipcode">Event Zipcode: </label>
    <input type="number" name="event_zipcode" id="event_zipcode" value="<%= event.event_zipcode %>">
    <br><br>
    <!--Event Timing-->
    <label for="event_start_time">Event Start Time: </label>
    <% 
      //Format start time by removing timezone
      const eventStartTime = event.event_start_time;
      const [time] = eventStartTime.split('+');
    %>
    <input type="text" name="event_start_time" id="event_start_time" value="<%= time %>">
    <br><br>
    <label for="event_end_time">Event End Time: </label>
    <% 
      //Format end time by removing timezone
      const eventEndTime = event.event_end_time;
      const [endtime] = eventEndTime.split('+');
    %>
    <input type="text" name="event_end_time" id="event_end_time" value="<%= endtime %>">
    <br><br>
    <!--Story duration options-->
    <label for="jen_story">Jen Story Duration: </label>
    <input name="story_options" type="radio" value="0" <%= event.jen_story === null ? 'checked' : '' %>>0
    <input name="story_options" type="radio" value="5" <%= event.jen_story === 5 ? 'checked' : '' %>>5
    <input name="story_options" type="radio" value="10" <%= event.jen_story === 10 ? 'checked' : '' %>>10
    <input name="story_options" type="radio" value="15" <%= event.jen_story === 15 ? 'checked' : '' %>>15
    <input name="story_options" type="radio" value="30" <%= event.jen_story === 30 ? 'checked' : '' %>>30
    <br><br>
    <!--Event description and status-->
    <label for="event_status_description">Event Status Description: </label>
    <textarea rows="10" cols="100" name="event_status_description" id="event_status_description"><%= event.event_status_description %></textarea>
    <br><br>
    <!--Participant counts-->
    <label for="num_untrained_participants">Number of Untrained Participants</label>
    <input type="number" name="num_untrained_participants" id="num_untrained_participants" value="<%= event.num_untrained_participants || 0 %>">
    <br><br>
    <label for="num_trained_participants">Number of Trained Participants</label>
    <input type="number" id="num_trained_participants" name="num_trained_participants" value="<%= event.num_trained_participants || 0 %>">
    <br><br>
    <label for="num_part_children">Number of Child Participants</label>
    <input type="number" id="num_part_children" name="num_part_children" value="<%= event.num_part_children || 0 %>">
    <br><br>
    <label for="num_volunteers">Number of Volunteers</label>
    <input type="number" name="num_volunteers" id="num_volunteers" value="<%= event.num_volunteers || 0 %>">
    <br><br>
    <label for="num_sewers">Number of Sewists: </label>
    <input type="number" name="num_sewers" id="num_sewers" value="<%= event.num_sewers || 0 %>">
    <br><br>
    <!--Event type selection-->
    <label for="event_type">Event Type: </label>
    <select name="event_type" id="event_type">
        <option value="SEWING" <%= event.event_type === 'SEWING' ? 'selected' : '' %>>SEWING</option>
        <option value="NON-SEWING" <%= event.event_type === 'NON-SEWING' ? 'selected' : '' %>>NON-SEWING</option>
        <option value="BOTH" <%= event.event_type === 'BOTH' ? 'selected' : '' %>>BOTH</option>
    </select>
    <br><br>
    <!--Equipment needs-->
    <label for="num_sewing_machines_needed">Number of Sewing Machines Needed: </label>
    <input type="number" name="num_sewing_machines_needed" id="num_sewing_machines_needed" value="<%= event.num_sewing_machines_needed || 0 %>">
    <br><br>
    <label for="num_sergers_needed">Number of Sergers Needed: </label>
    <input type="number" name="num_sergers_needed" id="num_sergers_needed" value="<%= event.num_sergers_needed || 0 %>">
    <br><br>
    
    <!--Venue Details-->
    <label for="venue_capacity">Venue Capacity</label>
    <input type="number" name="venue_capacity" id="venue_capacity" value="<%= event.venue_capacity || 0 %>">
    <br><br>
    <label for="num_tables_round">Number of Round Tables: </label>
    <input type="number" name="num_tables_round" id="num_tables_round" value="<%= event.num_tables_round || 0 %>">
    <br><br>
    <label for="round_table_capacity">Round Table Capacity: </label>
    <input type="number" name="round_table_capacity" id="round_table_capacity" value="<%= event.round_table_capacity || 0 %>">
    <br><br>
    <label for="num_tables_rectangular">Number of Rectangular Tables: </label>
    <input type="number" name="num_tables_rectangular" id="num_tables_rectangular" value="<%= event.num_tables_rectangular || 0 %>">
    <br><br>
    <label for="rectangle_table_capacity">Rectangle Table Capacity: </label>
    <input type="number" name="rectangle_table_capacity" id="rectangle_table_capacity" value="<%= event.rectangle_table_capacity || 0 %>">
    <br><br>
    <!--Production and comments-->

    <label for="total_production">Total Production from Event:</label>
    <input type="number" name="total_production" id="total_production" value="<%= event.total_production || 0 %>" >
    <br><br>
    
    <!-- Assuming product is an array of products -->
<label for="pocket_production">Pockets Produced: </label>
<input type="number" name="pocket_production" id="pocket_production" 
    value="<%= product.find(p => p.product_id === 3)?.quantity_made || 0 %>">

<label for="collar_production">Collars Produced: </label>
<input type="number" name="collar_production" id="collar_production" 
    value="<%= product.find(p => p.product_id === 4)?.quantity_made || 0 %>">

<label for="envelope_production">Envelopes Produced: </label>
<input type="number" name="envelope_production" id="envelope_production" 
    value="<%= product.find(p => p.product_id === 5)?.quantity_made || 0 %>">

<label for="vest_production">Vests Produced: </label>
<input type="number" name="vest_production" id="vest_production" 
    value="<%= product.find(p => p.product_id === 6)?.quantity_made || 0 %>">

<label for="finished_vest_production">Complete Vests Produced: </label>
<input type="number" name="finished_vest_production" id="finished_vest_production" 
    value="<%= product.find(p => p.product_id === 7)?.quantity_made || 0 %>">
    <label for="comments">Comments: </label>
    <textarea rows="10" cols="100" name="comments" id="comments"><%= event.comments %></textarea>
    <br><br>
    <!--Event status selection-->
    <label for="event_status">Event Status: </label>
    <input type="radio" name='event_status' value="PENDING" <%= event.event_status === 'PENDING' ? 'checked' : '' %>>PENDING
    <input type="radio" name='event_status' value="APPROVED" <%= event.event_status === 'APPROVED' ? 'checked' : '' %>>APPROVED
    <input type="radio" name='event_status' value="DECLINED" <%= event.event_status === 'DECLINED' ? 'checked' : '' %>>DECLINED
    <input type="radio" name='event_status' value="COMPLETED" <%= event.event_status === 'COMPLETED' ? 'checked' : '' %>>COMPLETED
    <br><br>
    <!--Form submission-->
    <button type="submit">Save Changes</button>
    </form>   
</body>
</html>